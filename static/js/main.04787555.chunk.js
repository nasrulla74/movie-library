(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/movie-placeholder.fc28652f.svg"},36:function(e,t,a){e.exports=a(96)},94:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(16),s=a.n(o),l=a(30),c=a.n(l),r=a(8),u=a(3),d="FETCH_MOVIES",v="FETCH_GENRES",m="FETCH_CAST",h=a(2),p=a.n(h),g=Object(u.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return p.a.mapKeys(t.payload.data.results,"id");default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return p.a.mapKeys(t.payload.data.genres,"id");default:return e}},cast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return p.a.mapKeys(t.payload.data.cast,"cast_id");default:return e}}}),b=a(5),f=a(6),y=a(10),M=a(7),S=a(9),E=a(1),O=a(13),j=a.n(O),k="fea48aa90ea7568ab98e7b21cdb2515a";function N(e){var t="https://api.themoviedb.org/3/".concat(e,"api_key=").concat(k),a=j.a.get(t);return{type:d,payload:a}}function C(){var e="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(k),t=j.a.get(e);return{type:v,payload:t}}function I(e,t){var a="https://api.themoviedb.org/3/movie/".concat(e,"/credits?api_key=").concat(k),n=j.a.get(a).then(function(e){return t(),e});return{type:m,payload:n}}var w=a(34),_=a.n(w),q=function(e){var t=e.movie,a=e.onMovieSelect,n=e.getMovieReleaseYear,o=t.title,s=t.poster_path,l=t.release_date,c=t.id,r=null===s?_.a:"http://image.tmdb.org/t/p/w154/".concat(s);return i.a.createElement("li",{className:"movie-item","data-id":c,onClick:function(e){return a(t,e)}},i.a.createElement("img",{src:r,alt:"".concat(o," - Movie Poster")}),i.a.createElement("p",{className:"movie-title"},o),i.a.createElement("p",{className:"movie-release-date"},n(l))," ")},R=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.movies,a=p.a.map(t,function(t){return i.a.createElement(q,{key:t.id,movie:t,onMovieSelect:e.props.onMovieSelect,getMovieReleaseYear:e.props.getMovieReleaseYear})});return t?i.a.createElement("div",{className:"movie-list-container"},i.a.createElement("h1",null,"Top Rated Movies"),i.a.createElement("ul",null,a)):i.a.createElement("div",null,"Loading...")}}]),t}(n.Component);var Y=Object(r.b)(function(e){return{movies:e.movies}})(R),x=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(M.a)(t).call(this,e))).filterByGenre=a.filterByGenre.bind(Object(E.a)(Object(E.a)(a))),a}return Object(S.a)(t,e),Object(f.a)(t,[{key:"filterByGenre",value:function(e){var t=e.target.value,a="all"===t?"movie/top_rated?":"discover/movie?sort_by=popularity.desc&page=1&with_genres=".concat(t,"&");this.props.fetchMovies(a)}},{key:"render",value:function(){var e=this.props.genres,t=p.a.map(e,function(e){return i.a.createElement("option",{value:e.id,key:e.id},e.name)});return i.a.createElement("div",{className:"genre-filter"},i.a.createElement("label",null,"Genre"),i.a.createElement("select",{id:"genre-list",onChange:this.filterByGenre},i.a.createElement("option",{value:"all",defaultValue:!0},"All"),t))}}]),t}(n.Component);var B=Object(r.b)(function(e){return{genres:e.genres}},function(e){return Object(u.b)({fetchMovies:N},e)})(x),T=function(e){var t,a=e.results,n=e.onMovieSelect,o=e.getMovieReleaseYear,s=e.handleSelect;return t=0===a.length?i.a.createElement("p",null,"No results found"):a.map(function(e){var t=o(e.release_date);return i.a.createElement("li",{key:e.id,className:"suggestion",onMouseDown:function(){n(e),s()}},e.title,i.a.createElement("span",{className:"release-date"},isNaN(t)?"":t))}),i.a.createElement("ul",{className:"autocomplete-container"},t)},H=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(M.a)(t).call(this,e))).state={query:"",results:[],showSuggestions:!1},a.handleInputChange=a.handleInputChange.bind(Object(E.a)(Object(E.a)(a))),a.toggleSuggestions=a.toggleSuggestions.bind(Object(E.a)(Object(E.a)(a))),a.handleMovieSelect=a.handleMovieSelect.bind(Object(E.a)(Object(E.a)(a))),a.getInfo=a.getInfo.bind(Object(E.a)(Object(E.a)(a))),a}return Object(S.a)(t,e),Object(f.a)(t,[{key:"getInfo",value:function(){var e=this;j.a.get("https://api.themoviedb.org/3/search/movie?sort_by=popularity.desc&include_adult=false&query=".concat(this.state.query,"&api_key=fea48aa90ea7568ab98e7b21cdb2515a")).then(function(t){var a=t.data;e.setState({results:a.results})})}},{key:"toggleSuggestions",value:function(e){""===e||"string"!==typeof e?this.setState({showSuggestions:!1}):this.setState({showSuggestions:!0})}},{key:"handleInputChange",value:function(e){var t=this;this.toggleSuggestions(e.target.value),this.setState({query:this.search.value},function(){t.state.query&&t.state.query.length>=1&&t.getInfo()})}},{key:"handleMovieSelect",value:function(){var e=this;this.setState({query:""},function(){e.toggleSuggestions(e.search.value)})}},{key:"render",value:function(){var e=this;return i.a.createElement("form",{className:"search-bar-container"},i.a.createElement("input",{value:this.state.query,type:"search",placeholder:"Search",ref:function(t){return e.search=t},onChange:this.handleInputChange,onBlur:this.toggleSuggestions}),this.state.showSuggestions&&i.a.createElement(T,{results:this.state.results,onMovieSelect:this.props.onMovieSelect,getMovieReleaseYear:this.props.getMovieReleaseYear,handleSelect:this.handleMovieSelect}))}}]),t}(n.Component),G=function(e){var t=e.thumbnail,a=e.name;return i.a.createElement("div",{className:"actor"},i.a.createElement("div",{className:"img-container"},i.a.createElement("div",{className:"actor-placeholder-image"}),null===t||"placeholder"===t?"":i.a.createElement("div",{className:"actor-thumbnail",style:{backgroundImage:"url(http://image.tmdb.org/t/p/w185/".concat(t)}})),i.a.createElement("p",{className:"actor-name"},a))},F=a(35),D=a.n(F),L=(a(90),a(92),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(M.a)(t).call(this,e))).state={currentMovieId:a.props.movieId},a}return Object(S.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.props.fetchCast(this.state.currentMovieId,function(){e.setState({castHasBeenFetched:!0})})}},{key:"componentDidUpdate",value:function(){var e=this;this.mounted&&this.state.currentMovieId!==this.props.movieId&&this.setState({currentMovieId:this.props.movieId},function(){e.props.fetchCast(e.state.currentMovieId,function(){e.setState({castHasBeenFetched:!0})})})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props.cast,t=this.state.castHasBeenFetched,a=p.a.times("8",function(e){return i.a.createElement(G,{key:e,thumbnail:"placeholder"})}),n=p.a.map(e,function(e){return i.a.createElement(G,{key:e.credit_id,name:e.name,thumbnail:e.profile_path})});return!p.a.isEmpty(e)&&i.a.createElement("div",{className:"cast"},i.a.createElement("h3",{className:"section-label"},"Cast"),i.a.createElement(D.a,Object.assign({className:"actors-container"},{infinite:!0,slidesToShow:7,speed:400,slidesToScroll:4,responsive:[{breakpoint:992,settings:{slidesToShow:6,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:5,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1}}]}),t?n:a))}}]),t}(n.Component));var A=Object(r.b)(function(e){return{cast:e.cast}},function(e){return Object(u.b)({fetchCast:I},e)})(L),K=function(e){function t(e){var a;Object(b.a)(this,t),a=Object(y.a)(this,Object(M.a)(t).call(this,e));var n=document.querySelector(".movie-list-container ul");return a.state={selectedMovie:a.props.selectedMovie,movieItem:document.querySelector(".movie-item[data-id='".concat(a.props.selectedMovie.id,"']")),firstChildId:parseInt(n.firstChild.dataset.id),lastChildId:parseInt(n.lastChild.dataset.id)},a.handleModalNavigation=a.handleModalNavigation.bind(Object(E.a)(Object(E.a)(a))),a}return Object(S.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.showHideNavButtons("load",this.state.selectedMovie.id,this.state.selectedMovie),this.mounted&&document.addEventListener("keydown",function(t){39===t.keyCode&&e.state.selectedMovie.id!==e.state.lastChildId?e.handleModalNavigation(t,"next",e.state.movieItem):37===t.keyCode&&e.state.selectedMovie.id!==e.state.firstChildId&&e.handleModalNavigation(t,"previous",e.state.movieItem)})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"showHideNavButtons",value:function(e,t,a){var n=this.state,i=n.lastChildId,o=n.firstChildId;"load"===e?t===o?document.querySelector(".previous-btn").style.visibility="hidden":t===i&&(document.querySelector(".next-btn").style.visibility="hidden"):"previous"===e&&null===a.previousSibling.previousSibling?document.querySelector(".previous-btn").style.visibility="hidden":"next"===e&&null===a.nextSibling.nextSibling&&(document.querySelector(".next-btn").style.visibility="hidden")}},{key:"handleModalNavigation",value:function(e,t,a){var n=this;e.stopPropagation();var i=this.props.movies;if(document.querySelector(".modal-navigation-btn").style.visibility="visible","previous"===t){var o=a.previousSibling.dataset.id,s=i[o];this.setState({selectedMovie:s},function(){n.setState({movieItem:document.querySelector(".movie-item[data-id='".concat(n.state.selectedMovie.id,"']"))})}),this.showHideNavButtons("previous",o,a)}else if("next"===t){var l=a.nextSibling.dataset.id,c=i[l];this.setState({selectedMovie:c},function(){n.setState({movieItem:document.querySelector(".movie-item[data-id='".concat(n.state.selectedMovie.id,"']"))})}),this.showHideNavButtons("next",l,a)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.onCloseModal,n=t.getMovieReleaseYear,o=this.state.selectedMovie,s=o.id,l=o.title,c=o.backdrop_path,r=o.overview,u=o.release_date,d=document.querySelector(".movie-item[data-id='".concat(s,"']"));return i.a.createElement("div",{className:"modal-outer-container",onClick:a},i.a.createElement("div",{className:"modal-navigation-btn previous-btn",onClick:function(t){return e.handleModalNavigation(t,"previous",d)}}," \u2190 "),i.a.createElement("div",{className:"modal-inner-container",onClick:function(e){return e.stopPropagation()},style:{backgroundImage:"url(".concat("http://image.tmdb.org/t/p/w780/").concat(c)}},i.a.createElement("div",{className:"backdrop"},i.a.createElement("div",{className:"close-btn",onClick:a},"\xd7"),i.a.createElement("div",{className:"details"},i.a.createElement("div",{className:"movie-info"},i.a.createElement("h2",{className:"movie-title"},l),i.a.createElement("p",{className:"movie-release-date subheading"},n(u)),i.a.createElement("p",{className:"movie-description"},r)),i.a.createElement(A,{movieId:s})))),i.a.createElement("div",{className:"modal-navigation-btn next-btn",onClick:function(t){return e.handleModalNavigation(t,"next",d)}},"\u2192"))}}]),t}(n.Component);var P=Object(r.b)(function(e){return{movies:e.movies}})(K),U=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(M.a)(t).call(this,e))).state={showModal:!1},a.handleMovieSelection=a.handleMovieSelection.bind(Object(E.a)(Object(E.a)(a))),a.toggleModal=a.toggleModal.bind(Object(E.a)(Object(E.a)(a))),a}return Object(S.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMovies("movie/top_rated?"),this.props.fetchGenreList()}},{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal}),document.querySelector("body").classList.toggle("modal-open")}},{key:"getMovieReleaseYear",value:function(e){return new Date(e).getFullYear()}},{key:"handleMovieSelection",value:function(e,t){this.setState({selectedMovie:e}),this.toggleModal()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"body-content"},i.a.createElement("div",{className:"filters"},i.a.createElement(H,{onMovieSelect:this.handleMovieSelection,getMovieReleaseYear:this.getMovieReleaseYear}),i.a.createElement(B,null)),i.a.createElement(Y,{onMovieSelect:this.handleMovieSelection,getMovieReleaseYear:this.getMovieReleaseYear})),this.state.showModal&&this.state.selectedMovie&&i.a.createElement(P,{selectedMovie:this.state.selectedMovie,onCloseModal:this.toggleModal,getMovieReleaseYear:this.getMovieReleaseYear}))}}]),t}(n.Component);var J=Object(r.b)(null,function(e){return Object(u.b)({fetchMovies:N,fetchGenreList:C},e)})(U),V=(a(94),Object(u.a)(c.a)(u.d));s.a.render(i.a.createElement(r.a,{store:V(g)},i.a.createElement(J,null)),document.getElementById("root"))}},[[36,2,1]]]);
//# sourceMappingURL=main.04787555.chunk.js.map