(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/movie-placeholder.fc28652f.svg"},31:function(e,t,a){e.exports=a.p+"static/media/actor-placeholder.ece4b611.svg"},33:function(e,t,a){e.exports=a(73)},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(25),c=a.n(i),r=a(26),l=a.n(r),s=a(8),u=a(2),v="FETCH_MOVIES",m="FETCH_GENRES",h="FETCH_CAST",d=a(32),p=Object(u.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return[t.payload.data.results];default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(d.a)(e).concat([t.payload.data.genres]);default:return e}},cast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return[t.payload.data.cast];default:return e}}}),g=a(5),b=a(6),f=a(10),y=a(7),M=a(9),E=a(1),O=a(11),j=a.n(O),S="fea48aa90ea7568ab98e7b21cdb2515a";function k(e){var t="https://api.themoviedb.org/3/".concat(e,"api_key=").concat(S),a=j.a.get(t);return{type:v,payload:a}}function N(){var e="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(S),t=j.a.get(e);return{type:m,payload:t}}function C(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"/credits?api_key=").concat(S),a=j.a.get(t);return{type:h,payload:a}}var w=a(30),_=a.n(w),R=function(e){var t=e.movie,a=e.onMovieSelect,n=e.getMovieReleaseYear,i=t.title,c=t.poster_path,r=t.release_date,l=null===c?_.a:"http://image.tmdb.org/t/p/w154/".concat(c);return o.a.createElement("li",{className:"movie-item",onClick:function(){return a(t)}},o.a.createElement("img",{src:l,alt:"".concat(i," - Movie Poster")}),o.a.createElement("p",{className:"movie-title"},i),o.a.createElement("p",{className:"movie-release-date"},n(r))," ")},Y=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.props.movies.map(function(t){return t.map(function(t,a){return o.a.createElement(R,{key:t.id,movie:t,onMovieSelect:e.props.onMovieSelect,getMovieReleaseYear:e.props.getMovieReleaseYear})})});return o.a.createElement("div",{className:"movie-list-container"},o.a.createElement("h1",null,"Top Rated Movies"),o.a.createElement("ul",null,t))}}]),t}(n.Component);var I=Object(s.b)(function(e){return{movies:e.movies}})(Y),q=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(y.a)(t).call(this,e))).filterByGenre=a.filterByGenre.bind(Object(E.a)(Object(E.a)(a))),a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"filterByGenre",value:function(e){var t=e.target.value,a="all"===t?"movie/top_rated?":"discover/movie?sort_by=popularity.desc&page=1&with_genres=".concat(t,"&");this.props.fetchMovies(a)}},{key:"render",value:function(){var e=this.props.genres.map(function(e){return e.map(function(e){return o.a.createElement("option",{value:e.id,key:e.id},e.name)})});return o.a.createElement("div",{className:"genre-filter"},o.a.createElement("label",null,"Genre"),o.a.createElement("select",{id:"genre-list",onChange:this.filterByGenre},o.a.createElement("option",{value:"all",defaultValue:!0},"All"),e))}}]),t}(n.Component);var G=Object(s.b)(function(e){return{genres:e.genres}},function(e){return Object(u.b)({fetchMovies:k},e)})(q),B=function(e){var t,a=e.results,n=e.onMovieSelect,i=e.getMovieReleaseYear,c=e.handleSelect;return t=0===a.length?o.a.createElement("p",null,"No results found"):a.map(function(e){var t=i(e.release_date);return o.a.createElement("li",{key:e.id,className:"suggestion",onClick:function(){n(e),c()}},e.title,o.a.createElement("span",{className:"release-date"},isNaN(t)?"":t))}),o.a.createElement("ul",{className:"autocomplete-container"},t)},L=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={query:"",results:[],showSuggestions:!1},a.handleInputChange=a.handleInputChange.bind(Object(E.a)(Object(E.a)(a))),a.toggleSuggestions=a.toggleSuggestions.bind(Object(E.a)(Object(E.a)(a))),a.handleMovieSelect=a.handleMovieSelect.bind(Object(E.a)(Object(E.a)(a))),a.getInfo=a.getInfo.bind(Object(E.a)(Object(E.a)(a))),a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"getInfo",value:function(){var e=this;j.a.get("https://api.themoviedb.org/3/search/movie?sort_by=popularity.desc&include_adult=false&query=".concat(this.state.query,"&api_key=fea48aa90ea7568ab98e7b21cdb2515a")).then(function(t){var a=t.data;e.setState({results:a.results})})}},{key:"toggleSuggestions",value:function(e){""===e||"string"!==typeof e?this.setState({showSuggestions:!1}):this.setState({showSuggestions:!0})}},{key:"handleInputChange",value:function(e){var t=this;this.toggleSuggestions(e.target.value),this.setState({query:this.search.value},function(){t.state.query&&t.state.query.length>=1&&t.getInfo()})}},{key:"handleMovieSelect",value:function(){var e=this;this.setState({query:""},function(){e.toggleSuggestions(e.search.value)})}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{className:"search-bar-container"},o.a.createElement("input",{value:this.state.query,type:"search",placeholder:"Search",ref:function(t){return e.search=t},onChange:this.handleInputChange,onBlur:this.toggleSuggestions}),this.state.showSuggestions&&o.a.createElement(B,{results:this.state.results,onMovieSelect:this.props.onMovieSelect,getMovieReleaseYear:this.props.getMovieReleaseYear,handleSelect:this.handleMovieSelect}))}}]),t}(n.Component),T=a(31),F=a.n(T),x=function(e){var t=e.thumbnail,a=e.name,n=null===t?"url(".concat(F.a,")"):"url(http://image.tmdb.org/t/p/w185/".concat(t,")");return o.a.createElement("li",{className:"actor"},o.a.createElement("div",{className:"img-container"},o.a.createElement("div",{className:"actor-thumbnail",style:{backgroundImage:"".concat(n)}})),o.a.createElement("p",{className:"actor-name"},a))},A=function(e){function t(){return Object(g.a)(this,t),Object(f.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCast(this.props.movieId)}},{key:"render",value:function(){var e=this.props.castList.cast.map(function(e){return e.slice(0,7).map(function(e){return o.a.createElement(x,{key:e.id,name:e.name,thumbnail:e.profile_path})})});return o.a.createElement("div",{className:"cast"},o.a.createElement("h3",{className:"section-label"},"Cast"),o.a.createElement("ul",null,e))}}]),t}(n.Component);var D=Object(s.b)(function(e){return{castList:e}},function(e){return Object(u.b)({fetchCast:C},e)})(A),H=function(e){var t=e.selectedMovie,a=e.onCloseModal,n=e.getMovieReleaseYear,i=t.id,c=t.title,r=t.backdrop_path,l=t.overview,s=t.release_date;return o.a.createElement("div",{className:"modal-outer-container",onClick:a},o.a.createElement("div",{className:"modal-inner-container",onClick:function(e){return e.stopPropagation()},style:{backgroundImage:"url(".concat("http://image.tmdb.org/t/p/w780/").concat(r)}},o.a.createElement("div",{className:"backdrop"},o.a.createElement("div",{className:"close-btn",onClick:a},"\xd7"),o.a.createElement("div",{className:"details"},o.a.createElement("div",{className:"movie-info"},o.a.createElement("h2",{className:"movie-title"},c),o.a.createElement("p",{className:"movie-release-date subheading"},n(s)),o.a.createElement("p",{className:"movie-description"},l)),o.a.createElement(D,{movieId:i})))))},J=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(f.a)(this,Object(y.a)(t).call(this,e))).state={showModal:!1},a.handleMovieSelection=a.handleMovieSelection.bind(Object(E.a)(Object(E.a)(a))),a.toggleModal=a.toggleModal.bind(Object(E.a)(Object(E.a)(a))),a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMovies("movie/top_rated?"),this.props.fetchGenreList()}},{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal}),document.querySelector("body").classList.toggle("modal-open")}},{key:"getMovieReleaseYear",value:function(e){return new Date(e).getFullYear()}},{key:"handleMovieSelection",value:function(e){this.setState({selectedMovie:e}),this.toggleModal()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"body-content"},o.a.createElement("div",{className:"filters"},o.a.createElement(L,{onMovieSelect:this.handleMovieSelection,getMovieReleaseYear:this.getMovieReleaseYear}),o.a.createElement(G,null)),o.a.createElement(I,{onMovieSelect:this.handleMovieSelection,getMovieReleaseYear:this.getMovieReleaseYear})),this.state.showModal&&this.state.selectedMovie&&o.a.createElement(H,{selectedMovie:this.state.selectedMovie,onCloseModal:this.toggleModal,getMovieReleaseYear:this.getMovieReleaseYear}))}}]),t}(n.Component);var P=Object(s.b)(null,function(e){return Object(u.b)({fetchMovies:k,fetchGenreList:N},e)})(J),V=(a(71),Object(u.a)(l.a)(u.d));c.a.render(o.a.createElement(s.a,{store:V(p)},o.a.createElement(P,null)),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.796f6c5a.chunk.js.map